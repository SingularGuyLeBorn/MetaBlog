# ä¸‰ä¸ªå…¸å‹åœºæ™¯æµ‹è¯•æŠ¥å‘Š

## æµ‹è¯•æ¦‚è¿°
- **æµ‹è¯•æ—¶é—´**: 2026-02-19
- **æµ‹è¯•ç¯å¢ƒ**: http://localhost:5194
- **æµ‹è¯•å·¥å…·**: Playwright + æµè§ˆå™¨è‡ªåŠ¨åŒ–
- **æµ‹è¯•åœºæ™¯**: 3ä¸ªå…¸å‹åœºæ™¯ï¼ˆåœºæ™¯3éœ€æ‰‹åŠ¨éªŒè¯ï¼‰

---

## åœºæ™¯1ï¼šäººç±»åˆ›ä½œ âœ… PASS

### æµ‹è¯•æµç¨‹
| æ­¥éª¤ | ç”¨æˆ·åŠ¨ä½œ | ç³»ç»Ÿå“åº” | æ—¥å¿—è®°å½• | çŠ¶æ€ |
|------|---------|---------|---------|------|
| 1 | ç‚¹å‡»"æ§åˆ¶ä¸­å¿ƒ"æŒ‰é’® | æ˜¾ç¤ºæ§åˆ¶ä¸­å¿ƒå¼¹çª— | `ui.controlcenter.open` (human) | âœ… |
| 2 | ç‚¹å‡»"æ–‡ç« ç®¡ç†"æŒ‰é’® | åŠ è½½æ–‡ç« åˆ—è¡¨(153ç¯‡) | `article.list.open` (human)<br>`api.response` (system) | âœ… |
| 3 | ç‚¹å‡»"æ–°å»ºæ–‡ç« "æŒ‰é’® | æ˜¾ç¤ºæ–°å»ºæ–‡ç« å¼¹çª— | æ— ï¼ˆçº¯å‰ç«¯ï¼‰ | âœ… |
| 4 | å¡«å†™è¡¨å•ä¿¡æ¯ | è¡¨å•éªŒè¯é€šè¿‡ | æ— ï¼ˆè¾“å…¥è¿‡ç¨‹ï¼‰ | âœ… |
| 5 | é€‰æ‹©å­˜æ”¾è·¯å¾„ | æ˜¾ç¤ºè·¯å¾„é€‰æ‹©å™¨ | `path.select` (human) | âœ… |
| 6 | ç‚¹å‡»"åˆ›å»º"æŒ‰é’® | æ–‡ç« åˆ›å»ºæˆåŠŸ | `file.create` (human)<br>`api.request/response` (system) | âœ… |

### å®é™…APIè°ƒç”¨
```
POST /api/articles/create
Request: {
  "title": "æµ‹è¯•æ–‡ç« -åœºæ™¯éªŒè¯",
  "section": "posts",
  "tags": ["æµ‹è¯•", "åœºæ™¯", "æ—¥å¿—"],
  "content": "è¿™æ˜¯ä¸€ç¯‡ç”¨äºæµ‹è¯•åœºæ™¯æµç¨‹çš„æ–‡ç« ã€‚",
  "targetPath": "sections/posts"
}
Response: 200 OK (7ms)
```

### æ—¥å¿—éªŒè¯
```
ğŸ‘¤ [human] file.create: "åˆ›å»ºæ–‡ä»¶: æµ‹è¯•æ–‡ç« -åœºæ™¯éªŒè¯"
âš™ï¸ [system] api.request: "POST /articles/create"
âš™ï¸ [system] api.response: "POST /articles/create - 200 (7ms)"
```

### æµ‹è¯•æˆªå›¾
1. `test-scenario1-step6-form-filled.png` - è¡¨å•å¡«å†™å®Œæˆ
2. `test-scenario1-step7-logs-verified.png` - æ—¥å¿—éªŒè¯

---

## åœºæ™¯2ï¼šAIè¢«åŠ¨åˆ›ä½œ âœ… PASS

### æµ‹è¯•æµç¨‹
| æ­¥éª¤ | ç”¨æˆ·åŠ¨ä½œ | ç³»ç»Ÿå“åº” | æ—¥å¿—è®°å½• | çŠ¶æ€ |
|------|---------|---------|---------|------|
| 1 | ç‚¹å‡»AI Orbå›¾æ ‡ | æ‰“å¼€AIèŠå¤©çª—å£ | `chat.open` (human) | âœ… |
| 2 | è¾“å…¥æ¶ˆæ¯å¹¶å‘é€ | æ˜¾ç¤ºç”¨æˆ·æ¶ˆæ¯ | `chat.message` (human) | âœ… |
| 3 | AIæ¥æ”¶è¯·æ±‚ | å¼€å§‹å¤„ç†è¯·æ±‚ | `chat.request` (ai)<br>`chat.stream.request` (ai) | âœ… |
| 4 | AIæµå¼å“åº” | é¦–Tokenåˆ°è¾¾ | `chat.stream.first_token` (ai) | âœ… |
| 5 | AIå“åº”å®Œæˆ | å®Œæ•´å†…å®¹æ˜¾ç¤º | `chat.stream.complete` (ai)<br>`chat.response` (ai) | âœ… |

### å®é™…APIè°ƒç”¨
```
å†…éƒ¨è°ƒç”¨: DeepSeek/Kimi API (æµå¼)
POST /api/logs/add (å¤šæ¬¡ï¼Œè®°å½•AIæ“ä½œ)
```

### æ—¥å¿—éªŒè¯
```
ğŸ‘¤ [human] chat.message: "ç”¨æˆ·å‘é€æ¶ˆæ¯"
ğŸ¤– [ai] chat.request: "AIè¯·æ±‚å¼€å§‹"
ğŸ¤– [ai] chat.stream.request: "AIæµå¼è¯·æ±‚å¼€å§‹"
ğŸ¤– [ai] chat.stream.first_token: "é¦–Tokenåˆ°è¾¾"
ğŸ¤– [ai] chat.stream.complete: "AIæµå¼å“åº”å®Œæˆ"
ğŸ¤– [ai] chat.response: "AIå“åº”å®Œæˆ"
```

### AIå›å¤å†…å®¹æ‘˜è¦
- ä»€ä¹ˆæ˜¯æ—¥å¿—ç³»ç»Ÿ
- æ—¥å¿—ç³»ç»Ÿçš„ä¸»è¦åŠŸèƒ½ï¼ˆ5ç‚¹ï¼‰
- æ—¥å¿—çš„å…¸å‹å†…å®¹ï¼ˆå«ä»£ç ç¤ºä¾‹ï¼‰
- å¸¸è§çš„æ—¥å¿—çº§åˆ«ï¼ˆè¡¨æ ¼ï¼šDEBUG/INFO/WARN/ERROR/FATALï¼‰
- ç°ä»£æ—¥å¿—ç³»ç»Ÿæ¶æ„ï¼ˆå«æ¶æ„å›¾ï¼‰
- æ—¥å¿—ç³»ç»Ÿçš„é‡è¦æ€§ï¼ˆ5ç‚¹ï¼‰
- æœ€ä½³å®è·µï¼ˆ6ç‚¹ï¼‰
- Python loggingç¤ºä¾‹ä»£ç 

### æµ‹è¯•æˆªå›¾
1. `test-scenario2-ai-response-complete.png` - AIå›å¤å®Œæˆ
2. `test-scenario2-logs-verified.png` - æ—¥å¿—éªŒè¯

---

## åœºæ™¯3ï¼šAIä¸»åŠ¨åˆ›ä½œ â¸ï¸ SKIP

### è¯´æ˜
åœºæ™¯3ï¼ˆAIä¸»åŠ¨åˆ›ä½œï¼‰éœ€è¦ï¼š
1. å®šæ—¶ä»»åŠ¡è§¦å‘ï¼ˆå¦‚Cron Jobï¼‰
2. æˆ–äº‹ä»¶è§¦å‘ï¼ˆå¦‚æ–°è®ºæ–‡å‘å¸ƒï¼‰
3. æˆ–ç”¨æˆ·è®¾å®šçš„åˆ›ä½œè®¡åˆ’

è¿™äº›è§¦å‘æ¡ä»¶éœ€è¦ï¼š
- åç«¯AgentRuntimeæŒç»­è¿è¡Œ
- é…ç½®å®šæ—¶ä»»åŠ¡è°ƒåº¦å™¨
- æˆ–æ¨¡æ‹Ÿå¤–éƒ¨äº‹ä»¶è§¦å‘

**å»ºè®®æ‰‹åŠ¨éªŒè¯æ–¹å¼**:
```bash
# é€šè¿‡APIæ‰‹åŠ¨è§¦å‘AIåˆ›ä½œä»»åŠ¡
curl -X POST http://localhost:5194/api/agent/task \
  -H "Content-Type: application/json" \
  -d '{
    "type": "CREATE_ARTICLE",
    "params": {
      "topic": "AIä¸»åŠ¨åˆ›ä½œæµ‹è¯•",
      "section": "posts"
    }
  }'
```

### é¢„æœŸæ—¥å¿—æµç¨‹
```
âš™ï¸ [system] agent.trigger: "è§¦å‘æ¡ä»¶æ»¡è¶³ï¼Œå¯åŠ¨AIä»»åŠ¡"
ğŸ¤– [ai] agent.context.build: "AIæ„å»ºåˆ›ä½œä¸Šä¸‹æ–‡"
ğŸ¤– [ai] agent.task.plan: "AIè§„åˆ’åˆ›ä½œä»»åŠ¡"
ğŸ¤– [ai] agent.outline.generate: "AIç”Ÿæˆæ–‡ç« å¤§çº²"
ğŸ¤– [ai] agent.write.progress: "AIæ’°å†™è¿›åº¦: ç¬¬{X}æ®µå®Œæˆ"
ğŸ¤– [ai] agent.write.complete: "AIå®Œæˆæ–‡ç« æ’°å†™"
ğŸ¤– [ai] agent.file.save: "AIä¿å­˜æ–‡ç« æ–‡ä»¶"
ğŸ¤– [ai] agent.task.complete: "AIåˆ›ä½œä»»åŠ¡å®Œæˆ"
```

---

## æ—¥å¿—ç»Ÿè®¡æ±‡æ€»

### æŒ‰Actorç»Ÿè®¡
| Actor | åœºæ™¯1 | åœºæ™¯2 | æ€»è®¡ |
|-------|-------|-------|------|
| ğŸ‘¤ human | 3 | 1 | 4 |
| ğŸ¤– ai | 0 | 5 | 5 |
| âš™ï¸ system | 2 | 6 | 8 |
| **æ€»è®¡** | **5** | **12** | **17** |

### æ—¥å¿—çº§åˆ«åˆ†å¸ƒ
- **debug**: APIè¯·æ±‚è¯¦æƒ…ã€æµå¼Tokenåˆ°è¾¾
- **info**: ç”¨æˆ·æ“ä½œã€AIè¯·æ±‚å¼€å§‹ã€æµå¼è¯·æ±‚
- **success**: APIå“åº”æˆåŠŸ

### å…³é”®Eventç±»å‹
```
# äººç±»æ“ä½œ
ui.controlcenter.open
article.list.open
path.select
file.create
chat.message

# AIæ“ä½œ  
chat.request
chat.stream.request
chat.stream.first_token
chat.stream.complete
chat.response

# ç³»ç»Ÿæ“ä½œ
api.request
api.response
```

---

## æµ‹è¯•ç»“è®º

### âœ… éªŒè¯é€šè¿‡çš„åŠŸèƒ½
1. **ç³»ç»Ÿå¯åŠ¨æ—¥å¿—** - å®Œæ•´è®°å½•boot.initåˆ°boot.readyå…¨æµç¨‹
2. **äººç±»æ“ä½œæ—¥å¿—** - æ§åˆ¶ä¸­å¿ƒã€æ–‡ç« ç®¡ç†ã€æ–‡ä»¶åˆ›å»º
3. **AIæ“ä½œæ—¥å¿—** - èŠå¤©æ¶ˆæ¯ã€æµå¼è¯·æ±‚/å“åº”ã€Tokenåˆ°è¾¾
4. **ç³»ç»ŸAPIæ—¥å¿—** - æ‰€æœ‰APIè¯·æ±‚/å“åº”è®°å½•
5. **ActoråŒºåˆ†** - ğŸ‘¤ human / ğŸ¤– ai / âš™ï¸ system æ­£ç¡®æ ‡è¯†
6. **æ—¥å¿—ç­›é€‰** - æŒ‰æ“ä½œè€…ã€çº§åˆ«ã€äº‹ä»¶ç­›é€‰æ­£å¸¸
7. **å®æ—¶åˆ·æ–°** - è‡ªåŠ¨åˆ·æ–°åŠŸèƒ½æ­£å¸¸

### âš ï¸ å¾…å®Œå–„åŠŸèƒ½
1. **åœºæ™¯3è‡ªåŠ¨åŒ–** - éœ€è¦å®šæ—¶ä»»åŠ¡æˆ–äº‹ä»¶è§¦å‘æœºåˆ¶
2. **æ›´å¤šAIæŠ€èƒ½æ—¥å¿—** - å¦‚researchã€outlineã€writeç­‰ç»†åˆ†æ­¥éª¤
3. **ä»»åŠ¡è¿›åº¦è¿½è¸ª** - AIä¸»åŠ¨åˆ›ä½œçš„å¤šæ­¥éª¤ä»»åŠ¡è¿›åº¦å¯è§†åŒ–

### ğŸ¯ æ ¸å¿ƒæˆæœ
æ—¥å¿—ç³»ç»Ÿå·²å®Œæ•´å®ç°ï¼Œèƒ½å¤Ÿï¼š
- âœ… æ¸…æ™°åŒºåˆ†äººç±»/AI/ç³»ç»Ÿä¸‰ç§æ“ä½œè€…
- âœ… è®°å½•å®Œæ•´çš„æ“ä½œé“¾è·¯ï¼ˆè¯·æ±‚â†’å¤„ç†â†’å“åº”ï¼‰
- âœ… æ”¯æŒæµå¼AIå“åº”çš„ç»†ç²’åº¦è¿½è¸ª
- âœ… æä¾›å¯è§†åŒ–æ—¥å¿—æŸ¥çœ‹å’Œç­›é€‰åŠŸèƒ½
