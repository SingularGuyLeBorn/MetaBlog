# 01-基础对话

## 基础调用

```python
from openai import OpenAI

client = OpenAI(
    api_key="your-api-key",
    base_url="https://api.deepseek.com",
)

# 基础对话（非思考模式）
response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[
        {"role": "system", "content": "You are a helpful assistant."},
        {"role": "user", "content": "Hello!"}
    ],
    temperature=1.0,
    max_tokens=4096
)

print(response.choices[0].message.content)
```

## 多轮对话

```python
messages = [
    {"role": "system", "content": "You are a helpful assistant."},
    {"role": "user", "content": "Hello!"}
]

# 第一轮
response = client.chat.completions.create(
    model="deepseek-chat",
    messages=messages
)
reply = response.choices[0].message.content
print(f"Assistant: {reply}")

# 第二轮
messages.append({"role": "assistant", "content": reply})
messages.append({"role": "user", "content": "What's your name?"})

response = client.chat.completions.create(
    model="deepseek-chat",
    messages=messages
)
print(f"Assistant: {response.choices[0].message.content}")
```

## 模型参数

| 参数 | 类型 | 默认值 | 说明 |
|:---|:---|:---:|:---|
| `model` | string | - | `deepseek-chat` 或 `deepseek-reasoner` |
| `messages` | array | - | 消息列表 |
| `max_tokens` | integer | 4096 | 最大输出 tokens（chat 最大 8K，reasoner 最大 64K） |
| `temperature` | float | 1.0 | 采样温度 (0-2) |
| `top_p` | float | 1.0 | 核采样 |
| `frequency_penalty` | float | 0 | 频率惩罚 (-2-2) |
| `presence_penalty` | float | 0 | 存在惩罚 (-2-2) |
| `stream` | boolean | false | 是否流式输出 |
| `thinking` | object | - | 思考模式控制 |

## 思考模式切换

```python
# 方式1: 使用 deepseek-reasoner（推荐）
response = client.chat.completions.create(
    model="deepseek-reasoner",
    messages=[{"role": "user", "content": "解方程 2x + 5 = 13"}]
)

# 方式2: 使用 deepseek-chat + thinking 参数
response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[{"role": "user", "content": "解方程 2x + 5 = 13"}],
    thinking={"type": "enabled"}  # 启用思考
)

# 禁用思考（明确指定）
response = client.chat.completions.create(
    model="deepseek-chat",
    messages=[{"role": "user", "content": "Hello"}],
    thinking={"type": "disabled"}
)
```
