# è§†é¢‘ç†è§£ (Video Understanding)

## åŠŸèƒ½ä»‹ç»

è§†é¢‘ç†è§£ï¼ˆVideo Understandingï¼‰æ˜¯æ™ºè°±AIæä¾›çš„å¤šæ¨¡æ€èƒ½åŠ›ï¼Œè®©æ¨¡å‹èƒ½å¤Ÿåˆ†æè§†é¢‘å†…å®¹ï¼Œç†è§£è§†é¢‘ä¸­çš„åŠ¨ä½œã€åœºæ™¯å’Œäº‹ä»¶ã€‚

> âš ï¸ **é‡è¦æç¤º**ï¼šç›®å‰æ™ºè°±AIçš„å…è´¹æ¨¡å‹ä¸­ï¼Œ**ä»… GLM-4.6V-Flash æ”¯æŒè§†é¢‘ç†è§£åŠŸèƒ½**ã€‚å…¶ä»–è§†è§‰æ¨¡å‹ï¼ˆå¦‚ GLM-4V-Flashã€GLM-4V-Plusï¼‰ä»…æ”¯æŒå›¾ç‰‡ç†è§£ï¼Œä¸æ”¯æŒè§†é¢‘è¾“å…¥ã€‚

## é€‚ç”¨åœºæ™¯

è§†é¢‘ç†è§£åŠŸèƒ½é€‚ç”¨äºä»¥ä¸‹åœºæ™¯ï¼š

| åœºæ™¯ | è¯´æ˜ |
|:---|:---|
| **è§†é¢‘æ‘˜è¦** | è‡ªåŠ¨ç”Ÿæˆè§†é¢‘å†…å®¹æ‘˜è¦ï¼Œæå–å…³é”®ä¿¡æ¯ |
| **å†…å®¹å®¡æ ¸** | è‡ªåŠ¨æ£€æµ‹è§†é¢‘ä¸­çš„ä¸å½“å†…å®¹ |
| **åŠ¨ä½œè¯†åˆ«** | è¯†åˆ«è§†é¢‘ä¸­çš„äººç‰©åŠ¨ä½œå’Œè¡Œä¸º |
| **åœºæ™¯ç†è§£** | åˆ†æè§†é¢‘å‘ç”Ÿçš„åœºæ™¯å’Œç¯å¢ƒ |
| **äº‹ä»¶æ£€æµ‹** | è¯†åˆ«è§†é¢‘ä¸­çš„é‡è¦äº‹ä»¶å’Œè½¬æŠ˜ç‚¹ |
| **è§†é¢‘é—®ç­”** | å›ç­”å…³äºè§†é¢‘å†…å®¹çš„å…·ä½“é—®é¢˜ |

## æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | æ¨¡å‹ä»£ç  | ä¸Šä¸‹æ–‡ | æœ€å¤§è¾“å‡º | æ€è€ƒæ¨¡å¼ | æ€ç»´é“¾æ”¯æŒ | è§†é¢‘é™åˆ¶ |
|:---|:---|:---:|:---:|:---:|:---:|:---|
| GLM-4.6V-Flash | glm-4.6v-flash | 128K | 32K | âœ… æ”¯æŒ | âœ… æ”¯æŒ | 200Mä»¥å†…ï¼Œmp4/mkv/mov |

**GLM-4.6V-Flash ç‰¹ç‚¹ï¼š**
- æ”¯æŒ `thinking` å‚æ•°å¯ç”¨æ€è€ƒæ¨¡å¼
- å¯ç”¨æ€è€ƒæ¨¡å¼åè¿”å› `reasoning_content`
- é€‚åˆéœ€è¦æ·±åº¦åˆ†æçš„è§†é¢‘ç†è§£ä»»åŠ¡

## è§†é¢‘æ ¼å¼å’Œé™åˆ¶

### æ”¯æŒæ ¼å¼
- MP4
- MKV
- MOV

### é™åˆ¶è¯´æ˜
- **æ–‡ä»¶å¤§å°**ï¼š200MB ä»¥å†…
- **è§†é¢‘æ—¶é•¿**ï¼šæ— æ˜ç¡®é™åˆ¶ï¼Œä½†å»ºè®®æ§åˆ¶åœ¨åˆç†èŒƒå›´å†…ä»¥è·å¾—æ›´å¥½çš„ç†è§£æ•ˆæœ
- **åˆ†è¾¨ç‡**ï¼šå»ºè®®ä¿æŒåŸå§‹åˆ†è¾¨ç‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å¤„ç†

## API è°ƒç”¨æ–¹å¼

### ç«¯ç‚¹ä¿¡æ¯
```
POST https://open.bigmodel.cn/api/paas/v4/chat/completions
```

### è¯·æ±‚æ ¼å¼

è§†é¢‘ç†è§£é€šè¿‡åœ¨æ¶ˆæ¯ä¸­åµŒå…¥ `video_url` æ¥å®ç°ï¼š

```json
{
  "model": "glm-4.6v-flash",
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "video_url",
          "video_url": {
            "url": "https://example.com/video.mp4"
          }
        },
        {
          "type": "text",
          "text": "è¯·æè¿°è¿™ä¸ªè§†é¢‘çš„å†…å®¹"
        }
      ]
    }
  ]
}
```

### å¯ç”¨æ€è€ƒæ¨¡å¼

```json
{
  "model": "glm-4.6v-flash",
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "video_url",
          "video_url": {
            "url": "https://example.com/video.mp4"
          }
        },
        {
          "type": "text",
          "text": "æ·±å…¥åˆ†æè¿™ä¸ªè§†é¢‘çš„å†…å®¹å’Œå«ä¹‰"
        }
      ]
    }
  ],
  "thinking": {
    "type": "enabled"
  }
}
```

### å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|:---|:---|:---:|:---|
| `model` | string | æ˜¯ | æ¨¡å‹ä»£ç ï¼Œå¿…é¡»ä½¿ç”¨ `glm-4.6v-flash` |
| `messages` | array | æ˜¯ | æ¶ˆæ¯åˆ—è¡¨ |
| `messages[].role` | string | æ˜¯ | æ¶ˆæ¯è§’è‰²ï¼Œ`user` æˆ– `assistant` |
| `messages[].content` | array | æ˜¯ | å¤šæ¨¡æ€å†…å®¹æ•°ç»„ |
| `content[].type` | string | æ˜¯ | å†…å®¹ç±»å‹ï¼Œ`video_url` æˆ– `text` |
| `content[].video_url.url` | string | æ˜¯ | è§†é¢‘URLåœ°å€ |
| `content[].text` | string | æ˜¯ | æ–‡æœ¬å†…å®¹ |
| `thinking` | object | å¦ | æ€è€ƒæ¨¡å¼é…ç½®ï¼Œå¯ç”¨åè¿”å›æ€ç»´é“¾ |

## ä»£ç ç¤ºä¾‹

### Python ç¤ºä¾‹

```python
import requests
import json

# API é…ç½®
API_KEY = "your-api-key"
API_URL = "https://open.bigmodel.cn/api/paas/v4/chat/completions"

# è¯·æ±‚å¤´
headers = {
    "Authorization": f"Bearer {API_KEY}",
    "Content-Type": "application/json"
}

# åŸºç¡€è§†é¢‘ç†è§£
payload = {
    "model": "glm-4.6v-flash",
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "video_url",
                    "video_url": {
                        "url": "https://cdn.bigmodel.cn/agent-demos/lark/113123.mov"
                    }
                },
                {
                    "type": "text",
                    "text": "è¯·æè¿°è¿™ä¸ªè§†é¢‘çš„å†…å®¹ï¼ŒåŒ…æ‹¬åœºæ™¯ã€åŠ¨ä½œå’Œä¸»è¦äº‹ä»¶ã€‚"
                }
            ]
        }
    ]
}

# å‘é€è¯·æ±‚
response = requests.post(API_URL, headers=headers, json=payload)
result = response.json()

# è¾“å‡ºç»“æœ
print(result["choices"][0]["message"]["content"])
```

### ä½¿ç”¨æ€è€ƒæ¨¡å¼è¿›è¡Œæ·±åº¦åˆ†æ

```python
# å¯ç”¨æ€è€ƒæ¨¡å¼
payload_thinking = {
    "model": "glm-4.6v-flash",
    "messages": [
        {
            "role": "user",
            "content": [
                {
                    "type": "video_url",
                    "video_url": {
                        "url": "https://cdn.bigmodel.cn/agent-demos/lark/113123.mov"
                    }
                },
                {
                    "type": "text",
                    "text": "æ·±å…¥åˆ†æè¿™ä¸ªè§†é¢‘çš„å†…å®¹ã€æ‹æ‘„æ‰‹æ³•å’Œä¼ è¾¾çš„ä¿¡æ¯"
                }
            ]
        }
    ],
    "thinking": {"type": "enabled"}
}

response = requests.post(API_URL, headers=headers, json=payload_thinking)
result = response.json()
message = result["choices"][0]["message"]

# è¾“å‡ºæ€ç»´é“¾å’Œæœ€ç»ˆç­”æ¡ˆ
print("ğŸ§  æ€ç»´é“¾ï¼š")
print(message.get("reasoning_content", "æ— "))
print("\nâœ… æœ€ç»ˆç­”æ¡ˆï¼š")
print(message["content"])
```

### ä½¿ç”¨ OpenAI SDK

```python
from openai import OpenAI

client = OpenAI(
    api_key="your-api-key",
    base_url="https://open.bigmodel.cn/api/paas/v4"
)

# åŸºç¡€è§†é¢‘ç†è§£
response = client.chat.completions.create(
    model="glm-4.6v-flash",
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "video_url",
                    "video_url": {
                        "url": "https://cdn.bigmodel.cn/agent-demos/lark/113123.mov"
                    }
                },
                {
                    "type": "text",
                    "text": "è§†é¢‘ä¸­å‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿ"
                }
            ]
        }
    ]
)

print(response.choices[0].message.content)

# å¯ç”¨æ€è€ƒæ¨¡å¼
response_thinking = client.chat.completions.create(
    model="glm-4.6v-flash",
    messages=[
        {
            "role": "user",
            "content": [
                {
                    "type": "video_url",
                    "video_url": {
                        "url": "https://cdn.bigmodel.cn/agent-demos/lark/113123.mov"
                    }
                },
                {
                    "type": "text",
                    "text": "æ·±å…¥åˆ†æè¿™ä¸ªè§†é¢‘"
                }
            ]
        }
    ],
    thinking={"type": "enabled"}
)

message = response_thinking.choices[0].message
print("æ€ç»´é“¾:", message.reasoning_content)
print("æœ€ç»ˆç­”æ¡ˆ:", message.content)
```

### cURL ç¤ºä¾‹

```bash
curl -X POST "https://open.bigmodel.cn/api/paas/v4/chat/completions" \
  -H "Authorization: Bearer your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "model": "glm-4.6v-flash",
    "messages": [
      {
        "role": "user",
        "content": [
          {
            "type": "video_url",
            "video_url": {
              "url": "https://cdn.bigmodel.cn/agent-demos/lark/113123.mov"
            }
          },
          {
            "type": "text",
            "text": "è¯·æ€»ç»“è¿™ä¸ªè§†é¢‘çš„ä¸»è¦å†…å®¹"
          }
        ]
      }
    ]
  }'
```

## å“åº”ç¤ºä¾‹

```json
{
  "id": "chatcmpl-xxx",
  "object": "chat.completion",
  "created": 1704067200,
  "model": "glm-4.6v-flash",
  "choices": [
    {
      "index": 0,
      "message": {
        "role": "assistant",
        "content": "è¿™ä¸ªè§†é¢‘å±•ç¤ºäº†ä¸€ä¸ªåŠå…¬å®¤åœºæ™¯ã€‚ç”»é¢ä¸­æœ‰ä¸€ä½ç©¿ç€æ­£è£…çš„äººæ­£åœ¨ä½¿ç”¨ç”µè„‘å·¥ä½œï¼Œå‘¨å›´æœ‰åŠå…¬æ¡Œæ¤…å’Œæ–‡ä»¶æŸœã€‚è§†é¢‘ä¸»è¦è®°å½•äº†æ—¥å¸¸å·¥ä½œæµç¨‹ï¼ŒåŒ…æ‹¬æ‰“å­—ã€æŸ¥çœ‹æ–‡æ¡£å’Œä¸åŒäº‹äº¤æµçš„è¿‡ç¨‹ã€‚æ•´ä¸ªåœºæ™¯å…‰çº¿å……è¶³ï¼Œæ°›å›´ä¸“ä¸šä¸”æœ‰åºã€‚",
        "reasoning_content": "1. é¦–å…ˆè§‚å¯Ÿè§†é¢‘çš„æ•´ä½“åœºæ™¯ï¼šåŠå…¬å®¤ç¯å¢ƒ... 2. è¯†åˆ«äººç‰©åŠ¨ä½œï¼šä½¿ç”¨ç”µè„‘ã€æ‰“å­—ã€äº¤æµ... 3. åˆ†æç¯å¢ƒå…ƒç´ ï¼šåŠå…¬æ¡Œæ¤…ã€æ–‡ä»¶æŸœã€å…‰çº¿..."
      },
      "finish_reason": "stop"
    }
  ],
  "usage": {
    "prompt_tokens": 1500,
    "completion_tokens": 200,
    "total_tokens": 1700
  }
}
```

## æ³¨æ„äº‹é¡¹

1. **æ¨¡å‹é€‰æ‹©**ï¼š
   - åŠ¡å¿…ä½¿ç”¨ `glm-4.6v-flash` æ¨¡å‹ï¼Œå…¶ä»–æ¨¡å‹ä¸æ”¯æŒè§†é¢‘ç†è§£
   - GLM-4.6V-Flash æ”¯æŒæ€è€ƒæ¨¡å¼ï¼Œå¯å¯ç”¨ `thinking` å‚æ•°è·å–æ€ç»´é“¾

2. **è§†é¢‘å¤§å°**ï¼š
   - ç¡®ä¿è§†é¢‘æ–‡ä»¶å¤§å°åœ¨ 200MB ä»¥å†…ï¼Œè¶…è¿‡é™åˆ¶ä¼šå¯¼è‡´è¯·æ±‚å¤±è´¥

3. **è§†é¢‘æ ¼å¼**ï¼š
   - ä»…æ”¯æŒ MP4ã€MKVã€MOV æ ¼å¼ï¼Œå…¶ä»–æ ¼å¼éœ€è¦å…ˆè½¬æ¢

4. **ç½‘ç»œç¨³å®šæ€§**ï¼š
   - è§†é¢‘ç†è§£éœ€è¦ä¼ è¾“è¾ƒå¤§çš„è§†é¢‘æ–‡ä»¶ï¼Œç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š

5. **å¤„ç†æ—¶é—´**ï¼š
   - è§†é¢‘åˆ†æéœ€è¦ä¸€å®šæ—¶é—´ï¼Œå“åº”æ—¶é—´å¯èƒ½æ¯”çº¯æ–‡æœ¬è¯·æ±‚é•¿

6. **URL å¯è®¿é—®æ€§**ï¼š
   - æä¾›çš„è§†é¢‘ URL å¿…é¡»å…¬å¼€å¯è®¿é—®ï¼Œæ¨¡å‹éœ€è¦èƒ½å¤Ÿä¸‹è½½è§†é¢‘

7. **éšç§å®‰å…¨**ï¼š
   - é¿å…ä¸Šä¼ åŒ…å«æ•æ„Ÿä¿¡æ¯çš„è§†é¢‘åˆ°å…¬å…±URL

8. **Token æ¶ˆè€—**ï¼š
   - è§†é¢‘ç†è§£ä¼šæ¶ˆè€—è¾ƒå¤šçš„ Tokenï¼Œè¯·æ³¨æ„ç”¨é‡æ§åˆ¶
   - å¯ç”¨æ€è€ƒæ¨¡å¼ä¼šé¢å¤–æ¶ˆè€— Tokenï¼ˆreasoning_content ä¸è®¡è´¹ï¼‰

## å¸¸è§é”™è¯¯

| é”™è¯¯ç  | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|:---|:---|:---|
| 400 | è§†é¢‘æ ¼å¼ä¸æ”¯æŒ | å°†è§†é¢‘è½¬æ¢ä¸º MP4ã€MKV æˆ– MOV æ ¼å¼ |
| 413 | è§†é¢‘æ–‡ä»¶è¿‡å¤§ | å‹ç¼©è§†é¢‘æˆ–è£å‰ªè‡³ 200MB ä»¥å†… |
| 404 | è§†é¢‘ URL æ— æ³•è®¿é—® | æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡®ä¸”å…¬å¼€å¯è®¿é—® |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ | é™ä½è¯·æ±‚é¢‘ç‡ |
