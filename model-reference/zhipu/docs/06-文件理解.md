# æ–‡ä»¶ç†è§£ (File Understanding)

## åŠŸèƒ½ä»‹ç»

æ–‡ä»¶ç†è§£ï¼ˆFile Understandingï¼‰æ˜¯æ™ºè°± AI æä¾›çš„æ–‡æ¡£åˆ†æèƒ½åŠ›ï¼Œè®©æ¨¡å‹èƒ½å¤Ÿè¯»å–ã€ç†è§£å’Œåˆ†æå¤šç§æ ¼å¼çš„æ–‡æ¡£å†…å®¹ã€‚é€šè¿‡ `file_url` å‚æ•°ä¼ å…¥æ–‡æ¡£é“¾æ¥ï¼Œæ¨¡å‹å¯ä»¥æå–æ–‡æ¡£ä¸­çš„æ–‡æœ¬ä¿¡æ¯å¹¶è¿›è¡Œæ™ºèƒ½åˆ†æã€‚

> âš ï¸ **é‡è¦æç¤º**ï¼šç›®å‰**ä»… GLM-4.6V-Flash** å…è´¹æ¨¡å‹æ”¯æŒæ–‡ä»¶ç†è§£åŠŸèƒ½ã€‚

---

## é€‚ç”¨åœºæ™¯

### 1. æ–‡æ¡£æ‘˜è¦ç”Ÿæˆ
- å¿«é€Ÿç”Ÿæˆé•¿ç¯‡æ–‡æ¡£çš„å†…å®¹æ‘˜è¦
- æå–å…³é”®ä¿¡æ¯å’Œæ ¸å¿ƒè§‚ç‚¹
- å¤šæ–‡æ¡£å¯¹æ¯”æ‘˜è¦

### 2. æ–‡æ¡£é—®ç­”
- åŸºäºæ–‡æ¡£å†…å®¹å›ç­”ç‰¹å®šé—®é¢˜
- å®šä½æ–‡æ¡£ä¸­çš„ç›¸å…³ä¿¡æ¯
- å¤šè½®å¯¹è¯å¼çš„æ–‡æ¡£æŸ¥è¯¢

### 3. ä¿¡æ¯æå–
- ä»åˆåŒä¸­æå–å…³é”®æ¡æ¬¾
- ä»æŠ¥å‘Šä¸­æå–æ•°æ®å’Œç»“è®º
- ç»“æ„åŒ–ä¿¡æ¯æŠ½å–

### 4. æ–‡æ¡£åˆ†æ
- è´¢åŠ¡æŠ¥è¡¨åˆ†æ
- å­¦æœ¯è®ºæ–‡è§£è¯»
- æ³•å¾‹æ–‡ä»¶å®¡æŸ¥

---

## æ”¯æŒçš„æ¨¡å‹

| æ¨¡å‹ | æ¨¡å‹ä»£ç  | ä¸Šä¸‹æ–‡ | æœ€å¤§è¾“å‡º | æ€è€ƒæ¨¡å¼ | æ€ç»´é“¾æ”¯æŒ | æ–‡ä»¶é™åˆ¶ |
|:---|:---|:---:|:---:|:---:|:---:|:---|
| GLM-4.6V-Flash | glm-4.6v-flash | 128K | 32K | âœ… æ”¯æŒ | âœ… æ”¯æŒ | æœ€å¤š50ä¸ªï¼ŒPDFâ‰¤50MB |

**GLM-4.6V-Flash ç‰¹ç‚¹ï¼š**
- æ”¯æŒ `thinking` å‚æ•°å¯ç”¨æ€è€ƒæ¨¡å¼
- å¯ç”¨æ€è€ƒæ¨¡å¼åè¿”å› `reasoning_content`
- é€‚åˆéœ€è¦æ·±åº¦åˆ†æçš„æ–‡æ¡£ç†è§£ä»»åŠ¡

---

## æ”¯æŒçš„æ–‡ä»¶æ ¼å¼å’Œé™åˆ¶

### æ”¯æŒçš„æ ¼å¼
- **PDF** - ä¾¿æºå¼æ–‡æ¡£æ ¼å¼
- **TXT** - çº¯æ–‡æœ¬æ–‡ä»¶
- **Word** - Word æ–‡æ¡£ (.doc, .docx)
- **Excel** - ç”µå­è¡¨æ ¼ (.xlsx, .xls)
- **PPT** - PowerPoint æ¼”ç¤ºæ–‡ç¨¿ (.pptx)
- **JSONL** - JSON Lines æ ¼å¼

### æ–‡ä»¶é™åˆ¶
| é™åˆ¶é¡¹ | è¯´æ˜ |
|:---|:---|
| æ–‡ä»¶æ•°é‡ | æœ€å¤šæ”¯æŒ **50 ä¸ª**æ–‡ä»¶åŒæ—¶ä¸Šä¼  |
| PDF å¤§å° | å•ä¸ª PDF æ–‡ä»¶ â‰¤ **50MB** |
| å…¶ä»–æ ¼å¼ | æ ¹æ®å®é™…å†…å®¹è°ƒæ•´ |

---

## API è°ƒç”¨æ–¹å¼

### åŸºæœ¬å‚æ•°

```json
{
  "model": "glm-4.6v-flash",
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "file_url",
          "file_url": {
            "url": "https://example.com/document.pdf"
          }
        },
        {
          "type": "text",
          "text": "è¯·åˆ†æè¿™ä»½æ–‡æ¡£çš„å†…å®¹"
        }
      ]
    }
  ]
}
```

### å¯ç”¨æ€è€ƒæ¨¡å¼

```json
{
  "model": "glm-4.6v-flash",
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "file_url",
          "file_url": {
            "url": "https://example.com/document.pdf"
          }
        },
        {
          "type": "text",
          "text": "æ·±å…¥åˆ†æè¿™ä»½æ–‡æ¡£çš„è¦ç‚¹å’Œæ½œåœ¨é—®é¢˜"
        }
      ]
    }
  ],
  "thinking": {
    "type": "enabled"
  }
}
```

### å…³é”®å‚æ•°è¯´æ˜

| å‚æ•° | ç±»å‹ | è¯´æ˜ |
|:---|:---|:---|
| `type` | string | å›ºå®šå€¼ `"file_url"` |
| `file_url.url` | string | æ–‡æ¡£çš„å…¬å¼€å¯è®¿é—® URL |
| `thinking` | object | å¯é€‰ï¼Œå¯ç”¨æ€è€ƒæ¨¡å¼åè¿”å›æ€ç»´é“¾ |

### å¤šæ–‡ä»¶è°ƒç”¨

```json
{
  "model": "glm-4.6v-flash",
  "messages": [
    {
      "role": "user",
      "content": [
        {
          "type": "file_url",
          "file_url": { "url": "https://example.com/doc1.pdf" }
        },
        {
          "type": "file_url",
          "file_url": { "url": "https://example.com/doc2.txt" }
        },
        {
          "type": "text",
          "text": "æ¯”è¾ƒè¿™ä¸¤ä»½æ–‡æ¡£çš„å†…å®¹å·®å¼‚"
        }
      ]
    }
  ]
}
```

---

## ä»£ç ç¤ºä¾‹

### Python ç¤ºä¾‹

```python
import requests

API_KEY = "your-api-key"
API_URL = "https://open.bigmodel.cn/api/paas/v4/chat/completions"

def analyze_document(file_url, question="è¯·åˆ†æè¿™ä»½æ–‡æ¡£çš„å†…å®¹"):
    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }
    
    payload = {
        "model": "glm-4.6v-flash",
        "messages": [
            {
                "role": "user",
                "content": [
                    {
                        "type": "file_url",
                        "file_url": {"url": file_url}
                    },
                    {
                        "type": "text",
                        "text": question
                    }
                ]
            }
        ]
    }
    
    response = requests.post(API_URL, json=payload, headers=headers)
    return response.json()

# ä½¿ç”¨ç¤ºä¾‹
result = analyze_document(
    "https://cdn.bigmodel.cn/static/demo/demo1.pdf",
    "è¯·æ€»ç»“è¿™ä»½æ–‡æ¡£çš„ä¸»è¦å†…å®¹"
)
print(result["choices"][0]["message"]["content"])
```

### å¯ç”¨æ€è€ƒæ¨¡å¼è¿›è¡Œæ·±åº¦åˆ†æ

```python
def analyze_document_deep(file_url, question):
    """ä½¿ç”¨æ€è€ƒæ¨¡å¼è¿›è¡Œæ·±åº¦æ–‡æ¡£åˆ†æ"""
    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }
    
    payload = {
        "model": "glm-4.6v-flash",
        "messages": [
            {
                "role": "user",
                "content": [
                    {
                        "type": "file_url",
                        "file_url": {"url": file_url}
                    },
                    {
                        "type": "text",
                        "text": question
                    }
                ]
            }
        ],
        "thinking": {"type": "enabled"}
    }
    
    response = requests.post(API_URL, json=payload, headers=headers)
    result = response.json()
    message = result["choices"][0]["message"]
    
    # è¿”å›æ€ç»´é“¾å’Œæœ€ç»ˆç­”æ¡ˆ
    return {
        "reasoning": message.get("reasoning_content", ""),
        "content": message["content"]
    }

# ä½¿ç”¨ç¤ºä¾‹
deep_result = analyze_document_deep(
    "https://cdn.bigmodel.cn/static/demo/demo1.pdf",
    "æ·±å…¥åˆ†æè¿™ä»½æ–‡æ¡£çš„æ ¸å¿ƒè§‚ç‚¹å’Œæ½œåœ¨é—®é¢˜"
)

print("ğŸ§  æ€ç»´é“¾ï¼š")
print(deep_result["reasoning"])
print("\nâœ… æœ€ç»ˆç­”æ¡ˆï¼š")
print(deep_result["content"])
```

### ç”Ÿæˆæ‘˜è¦ç¤ºä¾‹

```python
def generate_summary(file_url):
    return analyze_document(
        file_url,
        "è¯·ä¸ºè¿™ä»½æ–‡æ¡£ç”Ÿæˆä¸€ä»½ç®€æ´çš„æ‘˜è¦ï¼ŒåŒ…å«ä¸»è¦è§‚ç‚¹"
    )
```

### æ–‡æ¡£é—®ç­”ç¤ºä¾‹

```python
def document_qa(file_url, question):
    """åŸºäºæ–‡æ¡£å†…å®¹å›ç­”é—®é¢˜"""
    prompt = f"""åŸºäºæä¾›çš„æ–‡æ¡£ï¼Œè¯·å›ç­”ä»¥ä¸‹é—®é¢˜ï¼š
    
é—®é¢˜ï¼š{question}

è¯·ä»…æ ¹æ®æ–‡æ¡£å†…å®¹å›ç­”ï¼Œå¦‚æœæ–‡æ¡£ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·æ˜ç¡®è¯´æ˜ã€‚"""
    
    return analyze_document(file_url, prompt)
```

---

## æ³¨æ„äº‹é¡¹

### âš ï¸ é‡è¦é™åˆ¶

1. **æ¨¡å‹é™åˆ¶**
   - ä»… GLM-4.6V-Flash æ”¯æŒæ–‡ä»¶ç†è§£
   - å…¶ä»–æ¨¡å‹è°ƒç”¨ file_url ä¼šæŠ¥é”™

2. **ä¸èƒ½ä¸å…¶ä»–å¤šæ¨¡æ€å†…å®¹æ··ç”¨**
   - âŒ ä¸æ”¯æŒåŒæ—¶ä¼ å…¥ `file_url` å’Œ `image_url`
   - âŒ ä¸æ”¯æŒåŒæ—¶ä¼ å…¥ `file_url` å’Œ `video_url`
   - å¦‚éœ€åˆ†æå›¾ç‰‡ä¸­çš„æ–‡æ¡£ï¼Œè¯·å…ˆè½¬æ¢ä¸ºæ–‡æ¡£ URL

3. **æ–‡ä»¶è®¿é—®è¦æ±‚**
   - æ–‡ä»¶ URL å¿…é¡»æ˜¯**å…¬å¼€å¯è®¿é—®**çš„
   - éœ€è¦ç­¾åæˆ–è®¤è¯çš„æ–‡ä»¶é“¾æ¥æ— æ³•ç›´æ¥ä½¿ç”¨
   - å»ºè®®ä½¿ç”¨ç¨³å®šå¯é çš„ CDN æˆ–å­˜å‚¨æœåŠ¡

4. **æ€è€ƒæ¨¡å¼ä½¿ç”¨**
   - GLM-4.6V-Flash æ”¯æŒ `thinking` å‚æ•°å¯ç”¨æ€è€ƒæ¨¡å¼
   - å¯ç”¨åå¯è·å¾— `reasoning_content` æ€ç»´é“¾å†…å®¹
   - é€‚åˆå¤æ‚æ–‡æ¡£çš„æ·±åº¦åˆ†æä»»åŠ¡

5. **å†…å®¹é•¿åº¦é™åˆ¶**
   - è¶…é•¿æ–‡æ¡£å¯èƒ½è¢«æˆªæ–­
   - å»ºè®®å¯¹è¶…é•¿æ–‡æ¡£è¿›è¡Œåˆ†æ®µå¤„ç†

### æœ€ä½³å®è·µ

1. **æ–‡æ¡£é¢„å¤„ç†**
   - ç¡®ä¿æ–‡æ¡£æ ¼å¼æ­£ç¡®ï¼Œæ— æŸå
   - æ‰«æä»¶ PDF éœ€ç¡®ä¿æ–‡å­—å¯è¢«è¯†åˆ«ï¼ˆOCRï¼‰
   - å¤§å‹ PDF å¯è€ƒè™‘æ‹†åˆ†å¤„ç†

2. **æç¤ºè¯è®¾è®¡**
   - æ˜ç¡®æŒ‡å®šåˆ†æéœ€æ±‚
   - æä¾›è¾“å‡ºæ ¼å¼è¦æ±‚
   - å¤šæ–‡ä»¶åˆ†ææ—¶è¯´æ˜åˆ†æç»´åº¦

3. **é”™è¯¯å¤„ç†**
   - å¤„ç†æ–‡ä»¶æ— æ³•è®¿é—®çš„æƒ…å†µ
   - å¤„ç†æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒçš„æƒ…å†µ
   - å¤„ç†æ–‡ä»¶å†…å®¹è¿‡å¤§æˆ–æŸåçš„æƒ…å†µ

---

## ç›¸å…³èµ„æº

- [æ™ºè°± AI å®˜æ–¹æ–‡æ¡£](https://open.bigmodel.cn/)
- [API å‚è€ƒæ–‡æ¡£](https://open.bigmodel.cn/dev/api)
